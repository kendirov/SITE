Цель проекта
Автоматизация игры Eatventure с помощью компьютерного зрения (OpenCV). Принцип: «Умное поведение». Бот не просто кликает, он анализирует ситуацию, запоминает свои действия и использует стратегию «Camp & Creep» (стоять внизу, иногда проверять верх).

2. Главный Цикл (Main Loop)
Бот работает бесконечно в цикле. В каждом проходе он проверяет задачи строго в порядке приоритета. Если задача выполнена — цикл перезапускается с начала.

Приоритет задач:

Renovator (Реноватор): Критические окна (Level Up, Ремонт, Перелет).

General Upgrades (Общие улучшения): Меню повара (справа внизу).

Station Upgrader (Улучшение станций): Поиск кружков со стрелочками.

Navigator (Навигация): Умный скролл (Camp & Creep).

Tips (Чаевые): Сбор монет со столов.

Boxes (Сундуки): Сбор сундуков с пола.

3. Детальная логика модулей
A. Renovator (Переход между мирами)
Задача: Обеспечить непрерывность игры.

Сканирует экран на наличие кнопок: Okay (ошибки/инфо), Open (новый уровень), Renovate (молоток), Fly (самолет).

Если нашел — кликает.

Если нажал Renovate или Fly — ждет и ищет кнопку подтверждения (Confirm).

B. General Upgrades (Меню повара)
Триггер: Иконка со стрелкой вверх в правом нижнем углу (icon_upgrades). Кулдаун: 30 секунд (не открывать чаще). Логика:

Нажать на иконку.

Ждать открытия меню (0.5 сек).

Найти САМУЮ ВЕРХНЮЮ синюю кнопку (blue_button).

Turbo-Click: Быстро прокликать её 15 раз (покупка всего доступного).

Закрытие: Нажать на крестик (btn_close_x). Если крестик не найден — кликнуть в безопасную зону (верхний угол), чтобы закрыть меню.

C. Station Upgrader (Станции) — Критический модуль
Триггер: Кружок с белой стрелочкой вверх (upgrade_arrow). Логика:

Spatial Memory (Пространственная память):

Перед кликом проверяем координаты найденной стрелки.

Если мы уже кликали в радиусе 40 пикселей от этой точки за последние 20 секунд — ИГНОРИРОВАТЬ. (Защита от спама по одной и той же станции).

Открытие: Кликаем точно по стрелке (с учетом смещения STATION_OFFSET, если нужно).

Покупка (High Precision):

В открывшемся меню ищем кнопку btn_buy.

ВАЖНО: Порог уверенности (Threshold) строго > 0.85. Это защита от случайного нажатия на кнопку рекламы (Ad/Investor), которая может быть похожа по цвету. Если уверенность ниже — не жмем.

Действие: Long Press (Зажатие) на 3 секунды.

Закрытие:

Кликаем в ту же точку, где была стрелка (или чуть ниже/правее), чтобы закрыть всплывающее окно станции.

D. Navigator (Стратегия "Camp & Creep")
Задача: Всегда стремиться к последней (самой дорогой) станции, но не упускать ранние. Логика:

Init (Старт): При запуске агрессивно скроллим вниз до упора («Стена»).

Camp (Стоянка): Когда достигли низа, остаемся там на 3-4 цикла работы бота. Не скроллим, просто сканируем улучшения.

Look Up (Проверка верха):

После фазы «Стоянки» делаем короткий свайп вверх (на ~30% экрана).

Ищем улучшения там.

Сразу скроллим обратно вниз.

Обнаружение стен: Сравниваем скриншоты «До» и «После» свайпа. Если пиксели не изменились — мы уперлись в стену.

E. Collector (Сборщик)
Tips (Чаевые): Ищет золотые монетки на столах. Кликает (максимум 5 штук за раз). Кулдаун 15 сек.

Boxes (Сундуки): Ищет сундуки на полу. Кликает (максимум 3 штуки за раз). Кулдаун 10 сек.

4. Технические настройки (Under the Hood)
Vision (Зрение): Используется mss для скриншотов и cv2.matchTemplate для поиска картинок.

Input (Управление): Эмуляция мыши.

Human-like jitter: К координатам добавляется случайное смещение (±3-5 пикселей), чтобы клики не были роботоподобными.

Screen Region: Работаем только внутри окна игры (определено в config.py), не трогаем остальной рабочий стол.

Safety: Клавиша ESC мгновенно останавливает скрипт.