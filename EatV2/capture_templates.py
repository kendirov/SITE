"""
CAPTURE TEMPLATES SCRIPT
–î–µ–ª–∞–µ—Ç pixel-perfect —Å–∫—Ä–∏–Ω—à–æ—Ç –∏–≥—Ä—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤.

–í–ê–ñ–ù–û: –®–∞–±–ª–æ–Ω—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã—Ä–µ–∑–∞–Ω—ã –∏–∑ –≠–¢–û–ì–û —Å–∫—Ä–∏–Ω—à–æ—Ç–∞,
–∞ –Ω–µ –∏–∑ Mac screenshot tool (Cmd+Shift+4), —á—Ç–æ–±—ã —Ä–∞–∑–º–µ—Ä—ã —Å–æ–≤–ø–∞–¥–∞–ª–∏!

–ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï:
    python3 capture_templates.py
"""
import time
import cv2
from core.vision import Vision

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∑—Ä–µ–Ω–∏–µ (–∫–∞–∫ –≤ –±–æ—Ç–µ)
vision = Vision()

print("=" * 70)
print("üéØ CAPTURE TEMPLATES - Pixel-Perfect Screenshot")
print("=" * 70)
print("\nüìã –ü–û–î–ì–û–¢–û–í–ö–ê:")
print("   –û—Ç–∫—Ä–æ–π –∏–≥—Ä—É –∏ —É–±–µ–¥–∏—Å—å, —á—Ç–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –≤–∏–¥–Ω—ã:")
print("   1. ‚úÖ –°—Ç—Ä–µ–ª–∫–∞ —É–ª—É—á—à–µ–Ω–∏—è (upgrade_arrow) - –∫—Ä—É–∂–æ–∫ —Å —Å—Ç—Ä–µ–ª–∫–æ–π")
print("   2. ‚úÖ –ö–Ω–æ–ø–∫–∞ General Upgrades (icon_upgrades) - –≤–Ω–∏–∑—É —Å–ø—Ä–∞–≤–∞")
print("   3. ‚úÖ –ö–Ω–æ–ø–∫–∞ BUY (btn_buy) - –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ –º–µ–Ω—é —Å—Ç–∞–Ω—Ü–∏–∏")
print("   4. ‚úÖ –ú–æ–ª–æ—Ç–æ–∫ Renovate (btn_renovate) - –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω")
print("   5. ‚úÖ –ß–∞–µ–≤—ã–µ (tip_coin) - –∑–æ–ª–æ—Ç—ã–µ –º–æ–Ω–µ—Ç—ã")
print("   6. ‚úÖ –ö–æ—Ä–æ–±–∫–∏ (box_floor) - –Ω–∞ –ø–æ–ª—É")
print("\nüí° –°–û–í–ï–¢: –õ—É—á—à–µ —Å–∫—Ä–æ–ª–ª–Ω–∏ —Ç–∞–∫, —á—Ç–æ–±—ã –±—ã–ª–æ –º–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤!")
print("=" * 70)

print("\n‚è≥ –°–Ω–∏–º–æ–∫ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥...")
for i in range(5, 0, -1):
    print(f"   {i}...")
    time.sleep(1)

print("\nüì∏ –ó–∞—Ö–≤–∞—Ç—ã–≤–∞—é —Å–∫—Ä–∏–Ω—à–æ—Ç...")

# –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–Ω—à–æ—Ç —á–µ—Ä–µ–∑ Vision (mss) - –¢–û–ß–ù–û –ö–ê–ö –ë–û–¢!
screenshot = vision.take_screenshot()

# –°–æ—Ö—Ä–∞–Ω—è–µ–º
filename = "pixel_perfect_screenshot.png"
cv2.imwrite(filename, screenshot)

print("\n" + "=" * 70)
print("‚úÖ –ì–û–¢–û–í–û!")
print("=" * 70)
print(f"\nüìÅ –°–æ—Ö—Ä–∞–Ω–µ–Ω —Ñ–∞–π–ª: {filename}")
print(f"üìè –†–∞–∑–º–µ—Ä: {screenshot.shape[1]}x{screenshot.shape[0]} pixels")
print(f"üé® –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞: BGR (OpenCV)")

print("\n" + "=" * 70)
print("üìù –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –í–´–†–ï–ó–ö–ï –®–ê–ë–õ–û–ù–û–í:")
print("=" * 70)
print("""
1. –û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª 'pixel_perfect_screenshot.png' –≤ –ª—é–±–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ:
   - Photoshop
   - GIMP
   - Preview (Mac) - Cmd+K –¥–ª—è crop
   - Online: photopea.com

2. –í—ã—Ä–µ–∂–∏ –Ω—É–∂–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç:
   - –í—ã–±–µ—Ä–∏ Rectangle Selection Tool
   - –û–±–≤–µ–¥–∏ —ç–ª–µ–º–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç—Ä–µ–ª–∫—É —É–ª—É—á—à–µ–Ω–∏—è)
   - Crop (–æ–±—Ä–µ–∑–∞—Ç—å) –∏–ª–∏ Copy ‚Üí New Image
   - –í–ê–ñ–ù–û: –ó–∞—Ö–≤–∞—Ç–∏ –¢–û–õ–¨–ö–û —Å–∞–º —ç–ª–µ–º–µ–Ω—Ç, –±–µ–∑ –ª–∏—à–Ω–µ–≥–æ —Ñ–æ–Ω–∞!

3. –°–æ—Ö—Ä–∞–Ω–∏ –∫–∞–∫ PNG:
   - –ò–º—è —Ñ–∞–π–ª–∞: —Ç–æ—á–Ω–æ –∫–∞–∫ –≤ config.py (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'upgrade_arrow.png')
   - –§–æ—Ä–º–∞—Ç: PNG (–≤–∞–∂–Ω–æ!)
   - –ü—É—Ç—å: ./assets/upgrade_arrow.png

4. –ü–æ–≤—Ç–æ—Ä–∏ –¥–ª—è –≤—Å–µ—Ö –Ω—É–∂–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

5. –ó–∞–ø—É—Å—Ç–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É:
   python3 debug_vision.py

6. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ - –ø–æ–¥—Å—Ç—Ä–æ–π –ø–æ—Ä–æ–≥–∏ –≤ config.py
""")

print("=" * 70)
print("üéØ –ó–ê–ß–ï–ú –≠–¢–û –ù–£–ñ–ù–û:")
print("=" * 70)
print("""
–ü—Ä–æ–±–ª–µ–º–∞ Retina:
   Mac Screenshot (Cmd+Shift+4): 2x —Ä–∞–∑–º–µ—Ä (Retina)
   mss capture (–±–æ—Ç):            1x —Ä–∞–∑–º–µ—Ä (logical pixels)
   ‚Üí –†–∞–∑–º–µ—Ä—ã –ù–ï –°–û–í–ü–ê–î–ê–Æ–¢!

–†–µ—à–µ–Ω–∏–µ:
   –®–∞–±–ª–æ–Ω—ã –∏–∑ pixel_perfect_screenshot.png: –¢–û–ß–ù–û 1x —Ä–∞–∑–º–µ—Ä
   ‚Üí –°–æ–≤–ø–∞–¥–∞—é—Ç —Å mss capture
   ‚Üí Multi-scale (0.5-2.0) –ø–æ–∫—Ä–æ–µ—Ç –≤—Å–µ —Å–ª—É—á–∞–∏
   ‚Üí –ò–î–ï–ê–õ–¨–ù–û–ï –†–ê–°–ü–û–ó–ù–ê–í–ê–ù–ò–ï! ‚úÖ
""")

print("=" * 70)
print("üöÄ –°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì:")
print("=" * 70)
print(f"""
1. open {filename}
2. –í—ã—Ä–µ–∂–∏ –Ω—É–∂–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
3. –°–æ—Ö—Ä–∞–Ω–∏ –≤ ./assets/
4. python3 debug_vision.py
5. python3 run.py
""")

print("\n‚ú® –ì–û–¢–û–í–û! –¢–µ–ø–µ—Ä—å –≤—ã—Ä–µ–∑–∞–π —à–∞–±–ª–æ–Ω—ã –∏–∑ pixel_perfect_screenshot.png!")
