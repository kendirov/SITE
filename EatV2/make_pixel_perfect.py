import time
import cv2
import os
from core.vision import Vision

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∑—Ä–µ–Ω–∏–µ (–æ–Ω–æ —Å–∞–º–æ –ø–æ–¥—Ç—è–Ω–µ—Ç —Ä–µ–≥–∏–æ–Ω –∏–∑ config.py)
# –£–±–µ–¥–∏—Å—å, —á—Ç–æ config.py –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã!
try:
    vision = Vision()
    print("‚úÖ Vision system initialized.")
except Exception as e:
    print(f"‚ùå Error initializing Vision: {e}")
    exit(1)

print("\n--- –°–û–ó–î–ê–ù–ò–ï –ò–î–ï–ê–õ–¨–ù–û–ì–û –°–ö–†–ò–ù–®–û–¢–ê ---")
print("1. –û—Ç–∫—Ä–æ–π –∏–≥—Ä—É Eatventure.")
print("2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –≤–∏–¥–Ω—ã –∫–Ω–æ–ø–∫–∏:")
print("   - –ö—Ä—É–∂–æ–∫ —É–ª—É—á—à–µ–Ω–∏—è (–Ω–∞–¥ –µ–¥–æ–π)")
print("   - –ö–Ω–æ–ø–∫–∞ General Upgrades (—à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∞/—Å—Ç—Ä–µ–ª–∫–∞ —Å–ø—Ä–∞–≤–∞ –≤–Ω–∏–∑—É)")
print("   - –ö–Ω–æ–ø–∫–∞ 'Renovate' (–ú–æ–ª–æ—Ç–æ–∫) - –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞")
print("---------------------------------------")
print("–°–Ω–∏–º–æ–∫ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥...")

for i in range(5, 0, -1):
    print(f"{i}...")
    time.sleep(1)

print("üì∏ –©–ï–õ–ö! –î–µ–ª–∞—é —Å–∫—Ä–∏–Ω—à–æ—Ç...")

# –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–Ω—à–æ—Ç –∏–º–µ–Ω–Ω–æ —Ç–∞–∫, –∫–∞–∫ –µ–≥–æ –≤–∏–¥–∏—Ç –±–æ—Ç
try:
    screenshot = vision.take_screenshot()
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º "—Å—ã—Ä–æ–π" —Ñ–∞–π–ª
    filename = "pixel_perfect_screenshot.png"
    cv2.imwrite(filename, screenshot)

    print(f"\n‚úÖ –ì–û–¢–û–í–û! –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω: {filename}")
    print(f"üìè –†–∞–∑–º–µ—Ä—ã: {screenshot.shape[1]}x{screenshot.shape[0]} –ø–∏–∫—Å–µ–ª–µ–π")
    print("\nüëâ –ß–¢–û –î–ï–õ–ê–¢–¨ –î–ê–õ–¨–®–ï:")
    print("1. –û—Ç–∫—Ä–æ–π —ç—Ç–æ—Ç —Ñ–∞–π–ª –≤ Finder.")
    print("2. –í—ã—Ä–µ–∂–∏ –∏–∑ –Ω–µ–≥–æ –∫–Ω–æ–ø–∫–∏ (Upgrade Arrow, Icon Upgrades –∏ —Ç.–¥.).")
    print("3. –ó–∞–º–µ–Ω–∏ –∏–º–∏ —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ /assets.")
    
except Exception as e:
    print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞: {e}")